<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>Bazel: Correct Compilation Made Easy ← Machinae Elegantiam</title><meta name="author" content="Russell Harmon"/><link rel="stylesheet" href="/css/reset.css" type="text/css"/><link rel="stylesheet" href="/css/screen.css" type="text/css"/><link rel="stylesheet" href="/css/960.css" type="text/css"/><link rel="stylesheet" href="/css/syntax.css" type="text/css"/><link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Walter+Turncoat:regular"/><meta name="keywords" content="programming,build systems,bazel"/><meta name="description" content="Bazel's core build language language is largely declarative, and makes it very easy to express the dependencies of a target."/></head><body id=""><div id="site"><div id="header"><h1> <span class="nav"> <a href="/machinae" title="A programming blog">Machinae Elegantiam</a> <span class="byline">← <a href="/">Russell Harmon</a></span> </span></h1></div><div id="page"><h1 id="bazel-correct-compilation-made-easy">Bazel: Correct Compilation Made Easy</h1><p>Back in 2012, I <a href="//blog/2012-05-18/designing-robust-build-systems" title="Designing Robust Build Systems">wrote</a> about the difficulties creating correct build systems. Recently, Google open-sourced it’s internal build system. Called Blaze internally and Bazel externally, it addresses all of the concerns that I’ve had about build systems in the past.</p><h2 id="whats-so-good-about-it">What’s so good about it?</h2><p>Bazel’s sources are written in a subset of Python called the <a href="http://bazel.io/docs/build-ref.html#core_build_language" title="The Core Build Language">Core Build Language</a>, and placed in files named <code>BUILD</code>. This language is largely declarative, and makes it very easy to express the dependencies of a target. The Bazel <a href="http://bazel.io/docs/build-ref.html#dependencies" title="Dependencies">documentation</a> talks a great deal about direct vs indirect dependencies. One of the great things about Bazel is that “the build tool attempts aggressively to check for missing dependencies and report errors, but it is not possible for this checking to be complete in all cases.” -Bazel’s documentation</p><h2 id="generating-sources">Generating Sources</h2><p>Using <a href="http://bazel.io/docs/skylark/index.html" title="Skylark">Skylark</a>, you can also create build rules with custom inputs and outputs. This enables quite a few use cases which are either hard to support, or entirely unsupported in build systems I’ve looked at in the past. These use cases include:</p><ul><li>Generating header files, common in kernel build systems.</li><li>Generating a compiler using a parser &amp; lexer generator such as yacc &amp; flex. Nethack does this.</li></ul><h2 id="more-information">More Information</h2><p>You can get more information about Bazel from their website, <a href="http://bazel.io/" title="Bazel: Correct, reproducible, fast builds for everyone.">bazel.io</a>.</p></div><div id="disqus"><div id="disqus_thread"></div> <script>var disqus_shortname="eatnumber1",disqus_identifier="/blog/2015-03-31/bazel";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript> Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript"> comments powered by Disqus. </a> </noscript> <a href="http://disqus.com" class="dsq-brlink"> blog comments powered by <span class="logo-disqus">Disqus</span> </a></div><div id="footer"> <address> <span class="copyright"> Content by <a rel="author" href="/">Russell Harmon</a>. Design by <a href="http://mark.reid.name/info/site.html">Mark Reid</a> <br/> (<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Some rights reserved</a>) </span> <span class="engine"> Powered by <a href="http://jekyllrb.com/" title="A static, minimalist CMS">Jekyll</a>. Hosted by <a href="http://pages.github.com/">GitHub</a>. </span> <address></div></div> <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-10349264-2"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html>